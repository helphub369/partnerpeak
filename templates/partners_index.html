<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Partners — PartnerPeak</title>
<style>
:root{--bg:#0b1020;--panel:#0b1220;--glass:rgba(255,255,255,.04);--border:#1f2a44;--text:#e6ebf5;--muted:#9fb2cc;--brand:#38bdf8;--ok:#22c55e;--warn:#f59e0b}
*{box-sizing:border-box} body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
a{color:inherit;text-decoration:none}
.container{max-width:1200px;margin:0 auto;padding:0 20px}
.top{position:sticky;top:0;z-index:30;background:linear-gradient(180deg, rgba(11,16,32,.9), rgba(11,16,32,.6));border-bottom:1px solid var(--border);backdrop-filter:blur(8px)}
.top-inner{display:flex;align-items:center;justify-content:space-between;height:64px}
.brand{font-weight:800;color:var(--brand)}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin:18px 0}
.input, select{background:var(--glass);border:1px solid var(--border);border-radius:12px;padding:10px 12px;color:var(--text);outline:none}
select{padding-right:28px}
.btn{background:linear-gradient(135deg,var(--brand),#5eead4);color:#061019;border:none;border-radius:12px;padding:10px 14px;font-weight:700}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin:16px 0 40px}
.card{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));border:1px solid var(--border);border-radius:14px;padding:16px}
.card h3{margin:0 0 6px;color:#cfe6ff}
.meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:.9rem;margin-bottom:8px}
.pill{border:1px solid var(--border);background:var(--glass);border-radius:999px;padding:4px 8px;font-size:.8rem;color:var(--muted)}
.actions{display:flex;gap:10px;margin-top:10px}
.link{background:var(--brand);color:#061019;padding:8px 10px;border-radius:10px;font-weight:700}
.disc{font-size:.85rem;color:var(--muted);margin-top:6px}
.footer{color:var(--muted);padding:20px 0;border-top:1px solid var(--border)}
@media (max-width:980px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="top">
    <div class="container top-inner">
      <div class="brand">PartnerPeak</div>
      <nav><a href="../index.html">Home</a> &nbsp;·&nbsp; <a href="../disclosure.html">Disclosure</a></nav>
    </div>
  </div>

  <main class="container">
    <h1 style="margin:18px 0 10px;">Partner Catalog</h1>
    <p style="color:var(--muted);margin:0 0 18px;">Automation-friendly programs only. Search, filter, and click through with injected disclosures.</p>

    <div class="controls">
      <input class="input" id="q" placeholder="Search by name, vertical, payout…" />
      <select id="vertical">
        <option value="">All verticals</option>
        <option>Business Aviation</option><option>Shipping & Logistics</option><option>Industrial & Robotics</option>
        <option>Renewables & Carbon</option><option>Supercars & Luxury</option><option>Private Wealth & Residency</option>
        <option>Enterprise SaaS</option><option>Data & Analytics</option><option>Auctions & Heavy Equipment</option>
      </select>
      <select id="automation">
        <option value="">Automation score</option>
        <option value="5">5 – Full API</option><option value="4">4 – API or webhook</option>
        <option value="3">3 – High payout, partial</option>
      </select>
      <select id="region">
        <option value="">All regions</option>
        <option value="Tier1">Tier-1</option>
        <option value="Global">Global</option>
      </select>
      <button class="btn" id="apply">Apply</button>
      <div style="margin-left:auto;color:var(--muted)" id="count">—</div>
    </div>

    <div id="grid" class="grid" aria-live="polite"></div>
  </main>

  <footer class="footer container">© 2025 PartnerPeak — Global automation-first monetization.</footer>

  <script>
    const el = sel => document.querySelector(sel);
    const grid = el('#grid'), count = el('#count');

    const match = (p, q) => {
      if (!q) return true;
      const hay = [
        p.program_name, p.name, p.verticals, p.payout_model, p.notes
      ].join(' ').toLowerCase();
      return hay.includes(q.toLowerCase());
    };

    const pill = (txt) => `<span class="pill">${txt}</span>`;

    function card(p){
      const name = p.program_name || p.name || 'Unnamed Program';
      const verts = Array.isArray(p.verticals) ? p.verticals.join(', ') : (p.verticals || 'General');
      const payout = p.payout_model || (p.typical_payout_range ? `Payout: ${p.typical_payout_range}` : 'Payout: —');
      const auto = typeof p.automation_score==='number' ? `Auto ${p.automation_score}/5` : '';
      const region = p.geo_coverage || p.geo || '';
      const risk = (p.risk_flags||'').toString();
      const url = p.url || p.source || p["source/docs URL"] || '#';
      return `
        <article class="card">
          <h3>${name}</h3>
          <div class="meta">
            ${pill(verts)} ${auto?pill(auto):''} ${region?pill(region):''}
          </div>
          <div style="color:var(--muted);min-height:44px">${p.notes || p.description || 'Premium, automation-ready program.'}</div>
          <div class="actions">
            <a class="link" href="${url}" target="_blank" rel="nofollow noopener">Visit</a>
            ${risk.includes('regulated') ? '<span class="pill" title="Regulated vertical">Regulated</span>' : ''}
          </div>
          <div class="disc">Model: ${p.payout_model||'—'} ${p.typical_payout_range? ' • '+p.typical_payout_range:''}</div>
        </article>`;
    }

    function applyFilters(partners){
      const q = el('#q').value.trim();
      const v = el('#vertical').value;
      const a = el('#automation').value;
      const r = el('#region').value;

      const filtered = partners.filter(p => {
        if (!match(p,q)) return false;
        if (v && !((p.verticals||'')+'').includes(v)) return false;
        if (a && +p.automation_score < +a) return false;
        if (r && !((p.geo_coverage||p.geo||'')+'').includes(r)) return false;
        return true;
      });

      grid.innerHTML = filtered.map(card).join('') || '<div style="color:var(--muted)">No matches.</div>';
      count.textContent = `${filtered.length} of ${partners.length}`;
    }

    (async () => {
      try {
        const res = await fetch('../data/partners.json', {cache:'no-store'});
        const partners = res.ok ? await res.json() : [];
        applyFilters(partners);
        el('#apply').onclick = () => applyFilters(partners);
        ['#q','#vertical','#automation','#region'].forEach(s => el(s).addEventListener('keydown', e => { if(e.key==='Enter') applyFilters(partners); }));
      } catch(e){
        grid.innerHTML = '<div style="color:#fca5a5">Failed to load partners.json.</div>';
      }
    })();
  </script>
</body>
</html>
